{% extends "template.htm" %}
{% block contents %}

  {% if user %}
  <a href="/{{owner.getNickname()}}/{{repository.getName()}}/issues/new">create new issue</a>
  {% endif %}
 
 
  <div style="border:1px solid black;">
  <h3>Milestones</h3>
  {% for milestone in repository.getMilestones() %}
  <a href="/{{owner.getNickname()}}/{{repository.getName()}}/issues?milestone={{milestone.getName()|url_encode}}">{{milestone.getName()}}</a>
  {% endfor %}
  
  </div>
  <div style="border:1px solid black;">
  <h3>Labels</h3>
  {% for label in repository.getLabels() %}
  <a href="/{{owner.getNickname()}}/{{repository.getName()}}/issues?label={{label.getName()}}">{{label.getName()}}</a>
  {% endfor %}
  </div>
 
 
  {% set labels = repository.getLabels() %}
  {% for issue in issues %}
  <div>
  
    <div>{% if issue.getMilestone()%}[{{issue.getMilestone()}}]{% endif %}<a href="/{{owner.getNickname()}}/{{repository.getName()}}/issues/{{issue.getId()}}">#{{issue.getId()}} {{issue.getTitle()}}</a>
    
    {% if issue.hasLabel() %}
    <span>Labels: 
    {% for label_id in issue.getLabelIds() %}
    	[{{labels.getLabelById(label_id).getName()}}]
    {% endfor %}
    </span>
    {% endif %}
    
    
    </div>
    <div>by {{issue.getAuthor().getNickname()}} {{issue.getRegisteredAt()}}</div>
  </div>
  {% endfor %}
 
{% endblock %}